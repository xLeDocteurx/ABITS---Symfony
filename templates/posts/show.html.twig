{% extends 'base.html.twig' %}

{% block title %}#{{ post.id }} : {{ post.title }}{% endblock %}

{% block body %}
    {# <h1>#{{ post.id }} : {{ post.title }}</h1> #}


        <div class="container row">
            <div class="col s12">
                <div class="card">
                    <div id="post_show_cardimage" class="card-image card-image-show">
                        <a href="{{ path('posts_show', {'id': post.id}) }}"><img src="{{ asset('images/sample-1.jpg') }}" alt="Card Image">
                        <span class="card-title">#{{ post.id }} : {{ post.title }}</span></a>
                        <a class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
                    </div>
                    <div class="card-content">

                        {# <a class="" href="{{ path('comments_new', {'id': post.id}) }}">Comment this post</a> #}
                        <a class="waves-effect waves-light btn" href="{{ path('posts_index') }}">back to list</a>
                        <a class="waves-effect waves-light btn" href="{{ path('posts_edit', {'id': post.id}) }}">edit</a>
                        {{ include('posts/_delete_form.html.twig') }}
                        <br>
                        <br>
                        <hr>

                    </div>
                    <div class="card-content">
                        {{ post.date ? post.date|date('Y-m-d H:i:s') : '' }} / By : <a href="{{ path('users_show', {'id': post.author.id}) }}">{{ post.author.username }}</a>
                        <h1>#{{ post.id }} : {{ post.title }}</h1>
                        <p>{{ post.content }}</p>
                    </div>
                    <div class="card-content">

                        {# <ul class="collapsible">
                            <li class="active">
                                <div class="collapsible-header">
                                    <i class="material-icons">filter_drama</i>
                                    <h4>Comments</h4>
                                </div>
                                <div class="collapsible-body"> #}
                                <div class="card-content">
                                    <div class="card-panel">
                                        <h4>Comments</h4>
                                    </div>
                                </div>

                                <ul class="pagination center-align pagination-container">
                                    <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
                                    <li class="active"><a href="#!">1</a></li>
                                    <li class="disabled waves-effect"><a href="#!">2</a></li>
                                    <li class="disabled waves-effect"><a href="#!">3</a></li>
                                    <li class="disabled waves-effect"><a href="#!">4</a></li>
                                    <li class="disabled waves-effect"><a href="#!">5</a></li>
                                    <li class="disabled waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
                                </ul>

                                <div class="card-content">

                                    <ul class="collection collapsible">
                                    
                                        {% for comment in post.comments %}

                                        <li class="collection-item avatar">
                                            <img src="{{ comment.author.avatar ? comment.author.avatar : '/images/yuna.jpg' }}" alt="" class="circle">
                                            <span class="title"><a href="{{ path('users_show', {'id': comment.author.id})  }}">{{ comment.author.username }}</a></span>
                                            <p>{{ comment.date ? comment.date|date('Y-m-d H:i:s') : '' }}<br>
                                                {{ comment.content }}
                                            </p>
                                            {{ include('comments/_delete_form.html.twig') }}
                                            {# <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a> #}
                                        </li>
                                            
                                        {% else %}
                                            No commentarie found
                                        {% endfor %}
                                    </ul>

                                    <ul class="pagination center-align pagination-container">
                                        <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
                                        <li class="active"><a href="#!">1</a></li>
                                        <li class="disabled waves-effect"><a href="#!">2</a></li>
                                        <li class="disabled waves-effect"><a href="#!">3</a></li>
                                        <li class="disabled waves-effect"><a href="#!">4</a></li>
                                        <li class="disabled waves-effect"><a href="#!">5</a></li>
                                        <li class="disabled waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
                                    </ul>

                                </div>

                                {# </div>
                            </li>
                        </ul> #}

                    <div>
                </div>
            </div>
            <div class="card-action">

                {% if app.user %}
                    <ul class="collapsible">
                        <li class="active">
                            <div class="collapsible-header">
                                <i class="material-icons align-right">message</i>
                                <h4>Comment this post</h4>
                            </div>
                            <div class="collapsible-body">
                                {{ include('comments/_form.html.twig') }}
                            </div>
                        </li>
                    </ul>
                {% else %}
                    <h5>Les utilisateurs non connect√©s ne peuvent pas commenter</h5>
                {% endif %}

            </div>
        </div>
    </div>
</div>

{% endblock %}
